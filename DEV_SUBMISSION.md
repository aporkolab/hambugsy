---
title: "Hambugsy: The CLI That Tells You WHO Is Wrongâ€”Your Test or Your Code"
published: false
description: "Built with GitHub Copilot CLI - A tool that diagnoses failing tests and determines whether the fault lies in the test or the implementation"
tags: githubcopilotcli, testing, devtools, opensource
cover_image: https://your-image-url.com/hambugsy-cover.png
---

# ğŸ” Hambugsy: Finding the Bug in Your Stack

## What I Built

**Hambugsy** is a CLI tool that answers the question every developer asks when a test fails:

> "Is my test wrong, or is my code wrong?"

Instead of spending 30+ minutes investigating, Hambugsy gives you an instant verdict with confidence scores and recommended fixes.

### The Problem It Solves

Every developer has experienced this:

```
âŒ FAILED: testCalculateDiscount
   Expected: 90
   Actual: 85
```

Now begins the investigation:
- Was the test written correctly?
- Did someone change the business logic?
- Is this a regression?
- Which file do I need to fix?

**This investigation typically takes 30-60 minutes per failing test.**

### The Solution

```bash
$ hambugsy analyze ./src/OrderService.java

ğŸ” HAMBUGSY - Finding the bug in your stack...

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ calculateTotal() - line 47                                  â”‚
â”‚  â”œâ”€â”€ âŒ Test FAILS: testCalculateTotal_WithDiscount             â”‚
â”‚  â”œâ”€â”€ ğŸ”¬ Analysis:                                               â”‚
â”‚  â”‚   â€¢ Test expects: 10% discount (written: 2024-03-15)         â”‚
â”‚  â”‚   â€¢ Code applies: 15% discount (changed: 2024-11-22)         â”‚
â”‚  â”‚   â€¢ Git blame: "Updated discount per new pricing policy"     â”‚
â”‚  â”‚                                                              â”‚
â”‚  â””â”€â”€ ğŸ¯ VERDICT: Code CHANGED â†’ Test OUTDATED                   â”‚
â”‚      â””â”€â”€ ğŸ’¡ Fix: Update test assertion line 23: 90 â†’ 85         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“Š Summary: 1 outdated test | Time saved: ~45 minutes
```

---

## Demo

{% embed https://www.youtube.com/watch?v=YOUR_VIDEO_ID %}

### Live Demo GIF

![Hambugsy Demo](https://your-gif-url.com/hambugsy-demo.gif)

### Try It Yourself

```bash
# Install
npm install -g hambugsy

# Analyze your project
hambugsy analyze ./src
```

---

## How GitHub Copilot CLI Powers Hambugsy

Hambugsy is fundamentally built around GitHub Copilot CLI's capabilities. Here's how each feature uses Copilot:

### 1. Semantic Code Analysis

When Hambugsy needs to understand what a test *expects* vs what the code *does*, it uses Copilot:

```typescript
// Using Copilot to analyze test intent
const testAnalysis = await exec(`
  gh copilot explain "What behavior does this test verify: ${testCode}"
`);

// Using Copilot to analyze code behavior
const codeAnalysis = await exec(`
  gh copilot explain "What does this function actually do: ${sourceCode}"
`);
```

### 2. Intelligent Fix Suggestions

Copilot generates the specific fix recommendations:

```typescript
const fixSuggestion = await exec(`
  gh copilot suggest -t code "
    The test expects: ${testExpectation}
    The code does: ${actualBehavior}
    Generate a fix for the ${isTestWrong ? 'test' : 'code'}
  "
`);
```

### 3. Commit Message Analysis

Copilot helps interpret whether code changes were intentional:

```typescript
const intentAnalysis = await exec(`
  gh copilot explain "
    Was this change intentional or accidental based on the commit message: 
    '${commitMessage}'
  "
`);
```

### 4. Natural Language Explanations

Every verdict includes a human-readable explanation generated by Copilot:

```typescript
const explanation = await exec(`
  gh copilot explain "
    Explain why the test '${testName}' fails:
    - Test expects: ${expected}
    - Code returns: ${actual}
    - Test was written: ${testDate}
    - Code was changed: ${codeDate}
    Explain in plain English for a developer.
  "
`);
```

---

## The Verdict System

Hambugsy classifies every failing test into four categories:

| Verdict | Icon | When Applied |
|---------|------|--------------|
| **Code Bug** | ğŸ› | Test is correct, code has defect |
| **Outdated Test** | ğŸ“œ | Code changed intentionally, test needs update |
| **Flaky Test** | ğŸ² | Test passes/fails inconsistently |
| **Environment Issue** | ğŸŒ | External dependency problem |

### Decision Tree

```
                    Test Failure
                         â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                         â”‚
     Code changed?              Code unchanged
            â”‚                         â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
     â”‚             â”‚           â”‚             â”‚
Intentional?   Regression   Test valid?  Test invalid
     â”‚             â”‚           â”‚             â”‚
     â–¼             â–¼           â–¼             â–¼
  OUTDATED      CODE        CODE          TEST
    TEST         BUG         BUG           BUG
```

---

## Features

### Multi-Language Support

```bash
# Java/JUnit
hambugsy analyze ./src/main/java/

# TypeScript/Jest
hambugsy analyze ./src/ --framework=jest

# Python/pytest
hambugsy analyze ./tests/
```

| Language | Frameworks | Status |
|----------|------------|--------|
| Java | JUnit 4/5, TestNG | âœ… Full |
| TypeScript | Jest, Mocha, Vitest | âœ… Full |
| Python | pytest, unittest | âœ… Full |
| C# | NUnit, xUnit | ğŸ”¶ Beta |
| Go | testing | ğŸ”¶ Beta |

### ğŸ†• Missing Test Suggestions

Beyond analyzing failures, Hambugsy proactively finds **untested code paths**:

```bash
$ hambugsy suggest ./src/PaymentService.java

ğŸ” Finding gaps in your test coverage...

ğŸ“ processPayment() @ line 5
â”œâ”€â”€ âœ… TESTED: Happy path
â”œâ”€â”€ âŒ MISSING: null request handling
â”œâ”€â”€ âŒ MISSING: negative amount validation
â””â”€â”€ âŒ MISSING: large amount threshold

ğŸ’¡ SUGGESTED TESTS: [generates actual test code]
```

This is what sets Hambugsy apart - it doesn't just analyze failures, it **prevents future bugs** by identifying missing test coverage.

### CI/CD Integration

```yaml
# GitHub Actions
- name: Analyze Tests
  run: hambugsy analyze ./src --format=github
  
# The tool outputs GitHub Actions annotations
# ::error file=src/Service.java,line=47::CODE BUG: Missing null check
```

### Rich Configuration

```yaml
# .hambugsy.yml
patterns:
  source: ["src/**/*.java"]
  test: ["test/**/*.java"]

analysis:
  git_history_days: 90
  confidence_threshold: 0.7

ci:
  fail_on_bugs: true
  fail_on_outdated_tests: false
```

---

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Hambugsy CLI                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ Parser  â”‚  â”‚Analyzer â”‚  â”‚Reporter â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                    â”‚                            â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚           â”‚  Copilot Bridge â”‚                   â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    â”‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Git   â”‚  â”‚ Copilot â”‚  â”‚  File   â”‚         â”‚
â”‚  â”‚ History â”‚  â”‚   CLI   â”‚  â”‚ System  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Why "Hambugsy"?

ğŸ” **Ham** + ğŸ› **Bug** + ğŸ© **Bugsy**

- Like a **hamburger** with layers - bugs hide between the test layer and code layer
- We hunt **bugs** - finding who's guilty
- **Bugsy** Siegel - the gangster who always found the guilty party

*"Finding the bug in your stack"*

---

## Repository

{% github yourusername/hambugsy %}

### Quick Links

- ğŸ“– [Documentation](https://hambugsy.dev/docs)
- ğŸ› [Issue Tracker](https://github.com/yourusername/hambugsy/issues)
- ğŸ’¬ [Discussions](https://github.com/yourusername/hambugsy/discussions)

---

## What's Next

- [ ] VS Code Extension
- [ ] IntelliJ Plugin
- [ ] Auto-fix mode
- [ ] Team analytics dashboard
- [ ] Slack/Teams notifications

---

## Try It Now

```bash
# Prerequisites
gh extension install github/gh-copilot

# Install Hambugsy
npm install -g hambugsy

# Run on your project
hambugsy analyze ./src

# See what's really causing your test failures
```

---

## Feedback Welcome!

I'd love to hear your thoughts:
- Is this useful for your workflow?
- What languages/frameworks would you need?
- Any features you'd want to see?

Drop a comment below or open an issue on GitHub! ğŸ‘‡

---

*Built with â¤ï¸ for the GitHub Copilot CLI Challenge*

#githubcopilotcli #testing #devtools #opensource
